================================================== testEdit @[(0:1...0:1, "x")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
lxine one
line two
line three
---------------------
edit patch: (edits: @[(old: 0:1...0:1, new: 0:1...0:2)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 29, dstBytes: 37, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 0:6 -> 0:6  6 -> 6   |   0:0...0:6 -> 0:0...0:6  0...6 -> 0...6  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:6...0:6 -> 0:6...0:10  6...6 -> 6...10  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:6...1:4 -> 0:10...1:4  6...14 -> 10...18  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  14...14 -> 18...22  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  14...29 -> 22...37  Empty  Left

overlay patch: (edits: @[(old: 0:1...0:1, new: 0:1...0:2)])
---------- overlay map after edit
lxine testone
linexvlc two
line three
----------

================================================== testEdit @[(0:5...0:5, "x")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
line xone
line two
line three
---------------------
edit patch: (edits: @[(old: 0:5...0:5, new: 0:5...0:6)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 29, dstBytes: 37, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  9 -> 9   |   0:5...1:4 -> 0:9...1:4  5...14 -> 9...18  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  14...14 -> 18...22  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  14...29 -> 22...37  Empty  Left

overlay patch: (edits: @[(old: 0:9...0:9, new: 0:9...0:10)])
---------- overlay map after edit
line testxone
linexvlc two
line three
----------

================================================== testEdit @[(0:6...0:6, "x")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
line oxne
line two
line three
---------------------
edit patch: (edits: @[(old: 0:6...0:6, new: 0:6...0:7)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 29, dstBytes: 37, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  9 -> 9   |   0:5...1:4 -> 0:9...1:4  5...14 -> 9...18  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  14...14 -> 18...22  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  14...29 -> 22...37  Empty  Left

overlay patch: (edits: @[(old: 0:10...0:10, new: 0:10...0:11)])
---------- overlay map after edit
line testoxne
linexvlc two
line three
----------

================================================== testEdit @[(1:1...1:1, "x")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
line one
lxine two
line three
---------------------
edit patch: (edits: @[(old: 1:1...1:1, new: 1:1...1:2)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 29, dstBytes: 37, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:5 -> 1:5  9 -> 9   |   0:5...1:5 -> 0:9...1:5  5...14 -> 9...18  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:5...1:5 -> 1:5...1:9  14...14 -> 18...22  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:5...2:10 -> 1:9...2:10  14...29 -> 22...37  Empty  Left

overlay patch: (edits: @[(old: 1:1...1:1, new: 1:1...1:2)])
---------- overlay map after edit
line testone
lxinexvlc two
line three
----------

================================================== testEdit @[(1:4...1:4, "x")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
line one
linex two
line three
---------------------
edit patch: (edits: @[(old: 1:4...1:4, new: 1:4...1:5)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 29, dstBytes: 37, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:5 -> 1:5  9 -> 9   |   0:5...1:5 -> 0:9...1:5  5...14 -> 9...18  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:5...1:5 -> 1:5...1:9  14...14 -> 18...22  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:5...2:10 -> 1:9...2:10  14...29 -> 22...37  Empty  Left

overlay patch: (edits: @[(old: 1:8...1:8, new: 1:8...1:9)])
---------- overlay map after edit
line testone
linexxvlc two
line three
----------

================================================== testEdit @[(1:5...1:5, "x")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
line one
line xtwo
line three
---------------------
edit patch: (edits: @[(old: 1:5...1:5, new: 1:5...1:6)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 29, dstBytes: 37, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  16 -> 16   |   1:4...2:10 -> 1:8...2:10  13...29 -> 21...37  Empty  Left

overlay patch: (edits: @[(old: 1:9...1:9, new: 1:9...1:10)])
---------- overlay map after edit
line testone
linexvlc xtwo
line three
----------

================================================== testEdit @[(0:3...0:3, "\n")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
lin
e one
line two
line three
---------------------
edit patch: (edits: @[(old: 0:3...0:3, new: 0:3...1:0)])
new snapshot: OverlayMap(@3, (src: 3:10, dst: 3:10, srcBytes: 29, dstBytes: 37, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 1:2 -> 1:2  6 -> 6   |   0:0...1:2 -> 0:0...1:2  0...6 -> 0...6  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   1:2...1:2 -> 1:2...1:6  6...6 -> 6...10  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   1:2...2:4 -> 1:6...2:4  6...14 -> 10...18  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   2:4...2:4 -> 2:4...2:8  14...14 -> 18...22  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   2:4...3:10 -> 2:8...3:10  14...29 -> 22...37  Empty  Left

overlay patch: (edits: @[(old: 0:3...0:3, new: 0:3...1:0)])
---------- overlay map after edit
lin
e testone
linexvlc two
line three
----------

================================================== testEdit @[(1:3...1:3, "\n")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
line one
lin
e two
line three
---------------------
edit patch: (edits: @[(old: 1:3...1:3, new: 1:3...2:0)])
new snapshot: OverlayMap(@3, (src: 3:10, dst: 3:10, srcBytes: 29, dstBytes: 37, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 2:1 -> 2:1  9 -> 9   |   0:5...2:1 -> 0:9...2:1  5...14 -> 9...18  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   2:1...2:1 -> 2:1...2:5  14...14 -> 18...22  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   2:1...3:10 -> 2:5...3:10  14...29 -> 22...37  Empty  Left

overlay patch: (edits: @[(old: 1:3...1:3, new: 1:3...2:0)])
---------- overlay map after edit
line testone
lin
exvlc two
line three
----------

================================================== testEdit @[(2:5...2:5, "\n")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
line one
line two
line 
three
---------------------
edit patch: (edits: @[(old: 2:5...2:5, new: 2:5...3:0)])
new snapshot: OverlayMap(@3, (src: 3:5, dst: 3:5, srcBytes: 29, dstBytes: 37, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 2:5 -> 2:5  16 -> 16   |   1:4...3:5 -> 1:8...3:5  13...29 -> 21...37  Empty  Left

overlay patch: (edits: @[(old: 2:5...2:5, new: 2:5...3:0)])
---------- overlay map after edit
line testone
linexvlc two
line 
three
----------

================================================== testEdit @[(0:1...0:2, "")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
lne one
line two
line three
---------------------
edit patch: (edits: @[(old: 0:1...0:2, new: 0:1...0:1)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 27, dstBytes: 35, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 0:4 -> 0:4  4 -> 4   |   0:0...0:4 -> 0:0...0:4  0...4 -> 0...4  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:4...0:4 -> 0:4...0:8  4...4 -> 4...8  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:4...1:4 -> 0:8...1:4  4...12 -> 8...16  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  12...12 -> 16...20  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  12...27 -> 20...35  Empty  Left

overlay patch: (edits: @[(old: 0:1...0:2, new: 0:1...0:1)])
---------- overlay map after edit
lne testone
linexvlc two
line three
----------

================================================== testEdit @[(0:3...0:5, "")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
linone
line two
line three
---------------------
edit patch: (edits: @[(old: 0:3...0:5, new: 0:3...0:3)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 26, dstBytes: 34, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 0:3 -> 0:3  3 -> 3   |   0:0...0:3 -> 0:0...0:3  0...3 -> 0...3  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:3...0:3 -> 0:3...0:7  3...3 -> 3...7  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:3...1:4 -> 0:7...1:4  3...11 -> 7...15  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  11...11 -> 15...19  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  11...26 -> 19...34  Empty  Left

overlay patch: (edits: @[(old: 0:3...0:5, new: 0:3...0:3)])
---------- overlay map after edit
lintestone
linexvlc two
line three
----------

================================================== testEdit @[(0:4...0:6, "")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
linene
line two
line three
---------------------
edit patch: (edits: @[(old: 0:4...0:6, new: 0:4...0:4)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 26, dstBytes: 30, idCounts: (3, 1)), 1@G(L(0:3)))
  0 #0: 0:4 -> 0:4  4 -> 4   |   0:0...0:4 -> 0:0...0:4  0...4 -> 0...4  Empty  Left
  1 #0: 1:4 -> 1:4  7 -> 7   |   0:4...1:4 -> 0:4...1:4  4...11 -> 4...11  Empty  Left
  2 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  11...11 -> 11...15  String  Right  'xvlc'
  3 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  11...26 -> 15...30  Empty  Left

overlay patch: (edits: @[(old: 0:4...0:10, new: 0:4...0:4)])
---------- overlay map after edit
linene
linexvlc two
line three
----------

================================================== testEdit @[(0:4...0:6, "y")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
lineyne
line two
line three
---------------------
edit patch: (edits: @[(old: 0:4...0:6, new: 0:4...0:5)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 27, dstBytes: 31, idCounts: (3, 1)), 1@G(L(0:3)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #0: 1:4 -> 1:4  7 -> 7   |   0:5...1:4 -> 0:5...1:4  5...12 -> 5...12  Empty  Left
  2 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  12...12 -> 12...16  String  Right  'xvlc'
  3 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  12...27 -> 16...31  Empty  Left

overlay patch: (edits: @[(old: 0:4...0:10, new: 0:4...0:5)])
---------- overlay map after edit
lineyne
linexvlc two
line three
----------

================================================== testEdit @[(0:0...2:10, "line one\nline two\nline three")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
line one
line two
line three
---------------------
edit patch: (edits: @[(old: 0:0...2:10, new: 0:0...2:10)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:3)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

overlay patch: (edits: @[(old: 0:0...2:10, new: 0:0...2:10)])
---------- overlay map after edit
line one
line two
line three
----------

================================================== testEdit @[(0:0...0:0, "\n")]
---------- initial content

---------------------
initial snapshot: OverlayMap(@0, (src: 0:0, dst: 0:0, srcBytes: 0, dstBytes: 0, idCounts: (1)), 1@G())
  0 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:0...0:0  0...0 -> 0...0  Empty  Left

---------- initial overlay map

----------
overlay snapshot: OverlayMap(@0, (src: 0:0, dst: 0:0, srcBytes: 0, dstBytes: 0, idCounts: (1)), 1@G())
  0 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:0...0:0  0...0 -> 0...0  Empty  Left

---------- overlay map before edit

----------
--------------------- content after edit


---------------------
edit patch: (edits: @[(old: 0:0...0:0, new: 0:0...1:0)])
new snapshot: OverlayMap(@1, (src: 1:0, dst: 1:0, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:2)))
  0 #0: 1:0 -> 1:0  1 -> 1   |   0:0...1:0 -> 0:0...1:0  0...1 -> 0...1  Empty  Left

overlay patch: (edits: @[(old: 0:0...0:0, new: 0:0...1:0)])
---------- overlay map after edit


----------

================================================== testEdit @[(2:2...2:4, "")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@4, (src: 2:10, dst: 2:14, srcBytes: 28, dstBytes: 36, idCounts: (5, 4)), 1@G(L(0:1)))
  0 #0: 0:3 -> 0:3  3 -> 3   |   0:0...0:3 -> 0:0...0:3  0...3 -> 0...3  Empty  Left
  1 #1: 0:0 -> 0:2  0 -> 2   |   0:3...0:3 -> 0:3...0:5  3...3 -> 3...5  String  Left  '12'
  2 #0: 0:3 -> 0:3  3 -> 3   |   0:3...0:6 -> 0:5...0:8  3...6 -> 5...8  Empty  Left
  3 #1: 0:0 -> 0:2  0 -> 2   |   0:6...0:6 -> 0:8...0:10  6...6 -> 8...10  String  Left  '34'
  4 #0: 2:3 -> 2:3  15 -> 15   |   0:6...2:3 -> 0:10...2:3  6...21 -> 10...25  Empty  Left
  5 #1: 0:0 -> 0:2  0 -> 2   |   2:3...2:3 -> 2:3...2:5  21...21 -> 25...27  String  Right  '12'
  6 #0: 0:3 -> 0:3  3 -> 3   |   2:3...2:6 -> 2:5...2:8  21...24 -> 27...30  Empty  Left
  7 #1: 0:0 -> 0:2  0 -> 2   |   2:6...2:6 -> 2:8...2:10  24...24 -> 30...32  String  Right  '34'
  8 #0: 0:4 -> 0:4  4 -> 4   |   2:6...2:10 -> 2:10...2:14  24...28 -> 32...36  Empty  Left

---------- overlay map before edit
lin12e o34ne
line two
lin12e t34hree
----------
--------------------- content after edit
line one
line two
li three
---------------------
edit patch: (edits: @[(old: 2:2...2:4, new: 2:2...2:2)])
new snapshot: OverlayMap(@5, (src: 2:8, dst: 2:10, srcBytes: 26, dstBytes: 32, idCounts: (5, 3)), 1@G(L(0:3)))
  0 #0: 0:3 -> 0:3  3 -> 3   |   0:0...0:3 -> 0:0...0:3  0...3 -> 0...3  Empty  Left
  1 #1: 0:0 -> 0:2  0 -> 2   |   0:3...0:3 -> 0:3...0:5  3...3 -> 3...5  String  Left  '12'
  2 #0: 0:3 -> 0:3  3 -> 3   |   0:3...0:6 -> 0:5...0:8  3...6 -> 5...8  Empty  Left
  3 #1: 0:0 -> 0:2  0 -> 2   |   0:6...0:6 -> 0:8...0:10  6...6 -> 8...10  String  Left  '34'
  4 #0: 2:2 -> 2:2  14 -> 14   |   0:6...2:2 -> 0:10...2:2  6...20 -> 10...24  Empty  Left
  5 #0: 0:2 -> 0:2  2 -> 2   |   2:2...2:4 -> 2:2...2:4  20...22 -> 24...26  Empty  Left
  6 #1: 0:0 -> 0:2  0 -> 2   |   2:4...2:4 -> 2:4...2:6  22...22 -> 26...28  String  Right  '34'
  7 #0: 0:4 -> 0:4  4 -> 4   |   2:4...2:8 -> 2:6...2:10  22...26 -> 28...32  Empty  Left

overlay patch: (edits: @[(old: 2:2...2:6, new: 2:2...2:2)])
---------- overlay map after edit
lin12e o34ne
line two
li t34hree
----------

================================================== testEdit @[(0:2...0:2, "+")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@1, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (2, 1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:3 -> 0:3  3 -> 3   |   0:1...0:4 -> 0:1...0:4  1...4 -> 1...4  String  Left  'ack'
  2 #0: 2:10 -> 2:10  24 -> 24   |   0:4...2:10 -> 0:4...2:10  4...28 -> 4...28  Empty  Left

---------- overlay map before edit
lack one
line two
line three
----------
--------------------- content after edit
li+ne one
line two
line three
---------------------
edit patch: (edits: @[(old: 0:2...0:2, new: 0:2...0:3)])
new snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 29, dstBytes: 28, idCounts: (2, 1)), 1@G(L(0:3)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:4 -> 0:3  4 -> 3   |   0:1...0:5 -> 0:1...0:4  1...5 -> 1...4  String  Left  'ack'
  2 #0: 2:10 -> 2:10  24 -> 24   |   0:5...2:10 -> 0:4...2:10  5...29 -> 4...28  Empty  Left

overlay patch: (edits: @[])
---------- overlay map after edit
lack one
line two
line three
----------

================================================== testEdit @[(0:2...0:3, "")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@1, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (2, 1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:3 -> 0:3  3 -> 3   |   0:1...0:4 -> 0:1...0:4  1...4 -> 1...4  String  Left  'ack'
  2 #0: 2:10 -> 2:10  24 -> 24   |   0:4...2:10 -> 0:4...2:10  4...28 -> 4...28  Empty  Left

---------- overlay map before edit
lack one
line two
line three
----------
--------------------- content after edit
lie one
line two
line three
---------------------
edit patch: (edits: @[(old: 0:2...0:3, new: 0:2...0:2)])
new snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 27, dstBytes: 28, idCounts: (2, 1)), 1@G(L(0:3)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:2 -> 0:3  2 -> 3   |   0:1...0:3 -> 0:1...0:4  1...3 -> 1...4  String  Left  'ack'
  2 #0: 2:10 -> 2:10  24 -> 24   |   0:3...2:10 -> 0:4...2:10  3...27 -> 4...28  Empty  Left

overlay patch: (edits: @[])
---------- overlay map after edit
lack one
line two
line three
----------

================================================== testEdit @[(0:2...0:3, "+")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@1, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (2, 1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:3 -> 0:3  3 -> 3   |   0:1...0:4 -> 0:1...0:4  1...4 -> 1...4  String  Left  'ack'
  2 #0: 2:10 -> 2:10  24 -> 24   |   0:4...2:10 -> 0:4...2:10  4...28 -> 4...28  Empty  Left

---------- overlay map before edit
lack one
line two
line three
----------
--------------------- content after edit
li+e one
line two
line three
---------------------
edit patch: (edits: @[(old: 0:2...0:3, new: 0:2...0:3)])
new snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (2, 1)), 1@G(L(0:3)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:3 -> 0:3  3 -> 3   |   0:1...0:4 -> 0:1...0:4  1...4 -> 1...4  String  Left  'ack'
  2 #0: 2:10 -> 2:10  24 -> 24   |   0:4...2:10 -> 0:4...2:10  4...28 -> 4...28  Empty  Left

overlay patch: (edits: @[])
---------- overlay map after edit
lack one
line two
line three
----------

================================================== testEdit @[(0:0...0:3, "")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@1, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (2, 1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:3 -> 0:3  3 -> 3   |   0:1...0:4 -> 0:1...0:4  1...4 -> 1...4  String  Left  'ack'
  2 #0: 2:10 -> 2:10  24 -> 24   |   0:4...2:10 -> 0:4...2:10  4...28 -> 4...28  Empty  Left

---------- overlay map before edit
lack one
line two
line three
----------
--------------------- content after edit
e one
line two
line three
---------------------
edit patch: (edits: @[(old: 0:0...0:3, new: 0:0...0:0)])
new snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 25, dstBytes: 27, idCounts: (1, 1)), 1@G(L(0:3)))
  0 #1: 0:1 -> 0:3  1 -> 3   |   0:0...0:1 -> 0:0...0:3  0...1 -> 0...3  String  Left  'ack'
  1 #0: 2:10 -> 2:10  24 -> 24   |   0:1...2:10 -> 0:3...2:10  1...25 -> 3...27  Empty  Left

overlay patch: (edits: @[(old: 0:0...0:1, new: 0:0...0:0)])
---------- overlay map after edit
ack one
line two
line three
----------

================================================== testEdit @[(0:2...0:5, "")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@1, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (2, 1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:3 -> 0:3  3 -> 3   |   0:1...0:4 -> 0:1...0:4  1...4 -> 1...4  String  Left  'ack'
  2 #0: 2:10 -> 2:10  24 -> 24   |   0:4...2:10 -> 0:4...2:10  4...28 -> 4...28  Empty  Left

---------- overlay map before edit
lack one
line two
line three
----------
--------------------- content after edit
lione
line two
line three
---------------------
edit patch: (edits: @[(old: 0:2...0:5, new: 0:2...0:2)])
new snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 25, dstBytes: 27, idCounts: (2, 1)), 1@G(L(0:3)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:1 -> 0:3  1 -> 3   |   0:1...0:2 -> 0:1...0:4  1...2 -> 1...4  String  Left  'ack'
  2 #0: 2:10 -> 2:10  23 -> 23   |   0:2...2:10 -> 0:4...2:10  2...25 -> 4...27  Empty  Left

overlay patch: (edits: @[(old: 0:4...0:5, new: 0:4...0:4)])
---------- overlay map after edit
lackone
line two
line three
----------

================================================== testEdit @[(0:0...0:3, "+-")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@1, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (2, 1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:3 -> 0:3  3 -> 3   |   0:1...0:4 -> 0:1...0:4  1...4 -> 1...4  String  Left  'ack'
  2 #0: 2:10 -> 2:10  24 -> 24   |   0:4...2:10 -> 0:4...2:10  4...28 -> 4...28  Empty  Left

---------- overlay map before edit
lack one
line two
line three
----------
--------------------- content after edit
+-e one
line two
line three
---------------------
edit patch: (edits: @[(old: 0:0...0:3, new: 0:0...0:2)])
new snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 27, dstBytes: 29, idCounts: (2, 1)), 1@G(L(0:3)))
  0 #0: 0:2 -> 0:2  2 -> 2   |   0:0...0:2 -> 0:0...0:2  0...2 -> 0...2  Empty  Left
  1 #1: 0:1 -> 0:3  1 -> 3   |   0:2...0:3 -> 0:2...0:5  2...3 -> 2...5  String  Left  'ack'
  2 #0: 2:10 -> 2:10  24 -> 24   |   0:3...2:10 -> 0:5...2:10  3...27 -> 5...29  Empty  Left

overlay patch: (edits: @[(old: 0:0...0:1, new: 0:0...0:2)])
---------- overlay map after edit
+-ack one
line two
line three
----------

================================================== testEdit @[(0:2...0:5, "+-")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@1, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (2, 1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:3 -> 0:3  3 -> 3   |   0:1...0:4 -> 0:1...0:4  1...4 -> 1...4  String  Left  'ack'
  2 #0: 2:10 -> 2:10  24 -> 24   |   0:4...2:10 -> 0:4...2:10  4...28 -> 4...28  Empty  Left

---------- overlay map before edit
lack one
line two
line three
----------
--------------------- content after edit
li+-one
line two
line three
---------------------
edit patch: (edits: @[(old: 0:2...0:5, new: 0:2...0:4)])
new snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 27, dstBytes: 27, idCounts: (2, 1)), 1@G(L(0:3)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:3 -> 0:3  3 -> 3   |   0:1...0:4 -> 0:1...0:4  1...4 -> 1...4  String  Left  'ack'
  2 #0: 2:10 -> 2:10  23 -> 23   |   0:4...2:10 -> 0:4...2:10  4...27 -> 4...27  Empty  Left

overlay patch: (edits: @[(old: 0:4...0:5, new: 0:4...0:4)])
---------- overlay map after edit
lackone
line two
line three
----------

================================================== testEdit @[(0:1...0:1, "+"), (0:3...0:3, "-")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
l+in-e one
line two
line three
---------------------
edit patch: (edits: @[(old: 0:1...0:1, new: 0:1...0:2), (old: 0:3...0:3, new: 0:4...0:5)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 30, dstBytes: 38, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 0:7 -> 0:7  7 -> 7   |   0:0...0:7 -> 0:0...0:7  0...7 -> 0...7  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:7...0:7 -> 0:7...0:11  7...7 -> 7...11  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:7...1:4 -> 0:11...1:4  7...15 -> 11...19  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  15...15 -> 19...23  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  15...30 -> 23...38  Empty  Left

overlay patch: (edits: @[(old: 0:1...0:1, new: 0:1...0:2), (old: 0:3...0:3, new: 0:4...0:5)])
---------- overlay map after edit
l+in-e testone
linexvlc two
line three
----------

================================================== testEdit @[(0:1...0:1, "+"), (0:6...0:6, "-")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
l+ine o-ne
line two
line three
---------------------
edit patch: (edits: @[(old: 0:1...0:1, new: 0:1...0:2), (old: 0:6...0:6, new: 0:7...0:8)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 30, dstBytes: 38, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 0:6 -> 0:6  6 -> 6   |   0:0...0:6 -> 0:0...0:6  0...6 -> 0...6  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:6...0:6 -> 0:6...0:10  6...6 -> 6...10  String  Left  'test'
  2 #0: 1:4 -> 1:4  9 -> 9   |   0:6...1:4 -> 0:10...1:4  6...15 -> 10...19  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  15...15 -> 19...23  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  15...30 -> 23...38  Empty  Left

overlay patch: (edits: @[(old: 0:1...0:1, new: 0:1...0:2), (old: 0:10...0:10, new: 0:11...0:12)])
---------- overlay map after edit
l+ine testo-ne
linexvlc two
line three
----------

================================================== testEdit @[(0:6...0:6, "+"), (0:8...0:8, "-")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@2, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 36, idCounts: (3, 2)), 1@G(L(0:1)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  8 -> 8   |   0:5...1:4 -> 0:9...1:4  5...13 -> 9...17  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  13...13 -> 17...21  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  13...28 -> 21...36  Empty  Left

---------- overlay map before edit
line testone
linexvlc two
line three
----------
--------------------- content after edit
line o+ne-
line two
line three
---------------------
edit patch: (edits: @[(old: 0:6...0:6, new: 0:6...0:7), (old: 0:8...0:8, new: 0:9...0:10)])
new snapshot: OverlayMap(@3, (src: 2:10, dst: 2:10, srcBytes: 30, dstBytes: 38, idCounts: (3, 2)), 1@G(L(0:3)))
  0 #0: 0:5 -> 0:5  5 -> 5   |   0:0...0:5 -> 0:0...0:5  0...5 -> 0...5  Empty  Left
  1 #1: 0:0 -> 0:4  0 -> 4   |   0:5...0:5 -> 0:5...0:9  5...5 -> 5...9  String  Left  'test'
  2 #0: 1:4 -> 1:4  10 -> 10   |   0:5...1:4 -> 0:9...1:4  5...15 -> 9...19  Empty  Left
  3 #1: 0:0 -> 0:4  0 -> 4   |   1:4...1:4 -> 1:4...1:8  15...15 -> 19...23  String  Right  'xvlc'
  4 #0: 1:10 -> 1:10  15 -> 15   |   1:4...2:10 -> 1:8...2:10  15...30 -> 23...38  Empty  Left

overlay patch: (edits: @[(old: 0:10...0:10, new: 0:10...0:11), (old: 0:12...0:12, new: 0:13...0:14)])
---------- overlay map after edit
line testo+ne-
linexvlc two
line three
----------

================================================== testEdit @[(1:0...1:0, "+"), (1:2...1:2, "-"), (1:7...1:7, "+")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@6, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 30, idCounts: (7, 6)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:1...0:1 -> 0:1...0:4  1...1 -> 1...4  String  Left  'XYZ'
  2 #0: 0:2 -> 0:2  2 -> 2   |   0:1...0:3 -> 0:4...0:6  1...3 -> 4...6  Empty  Left
  3 #1: 0:2 -> 0:2  2 -> 2   |   0:3...0:5 -> 0:6...0:8  3...5 -> 6...8  String  Left  'W '
  4 #0: 0:1 -> 0:1  1 -> 1   |   0:5...0:6 -> 0:8...0:9  5...6 -> 8...9  Empty  Left
  5 #1: 0:2 -> 0:0  2 -> 0   |   0:6...0:8 -> 0:9...0:9  6...8 -> 9...9  String  Left  ''
  6 #0: 1:1 -> 1:1  2 -> 2   |   0:8...1:1 -> 0:9...1:1  8...10 -> 9...11  Empty  Left
  7 #1: 0:0 -> 0:3  0 -> 3   |   1:1...1:1 -> 1:1...1:4  10...10 -> 11...14  String  Left  'XYZ'
  8 #0: 0:2 -> 0:2  2 -> 2   |   1:1...1:3 -> 1:4...1:6  10...12 -> 14...16  Empty  Left
  9 #1: 0:2 -> 0:2  2 -> 2   |   1:3...1:5 -> 1:6...1:8  12...14 -> 16...18  String  Left  'W '
  10 #0: 0:1 -> 0:1  1 -> 1   |   1:5...1:6 -> 1:8...1:9  14...15 -> 18...19  Empty  Left
  11 #1: 0:2 -> 0:0  2 -> 0   |   1:6...1:8 -> 1:9...1:9  15...17 -> 19...19  String  Left  ''
  12 #0: 1:10 -> 1:10  11 -> 11   |   1:8...2:10 -> 1:9...2:10  17...28 -> 19...30  Empty  Left

---------- overlay map before edit
lXYZinW o
lXYZinW t
line three
----------
--------------------- content after edit
line one
+li-ne tw+o
line three
---------------------
edit patch: (edits: @[(old: 1:0...1:0, new: 1:0...1:1), (old: 1:2...1:2, new: 1:3...1:4), (old: 1:7...1:7, new: 1:9...1:10)])
new snapshot: OverlayMap(@7, (src: 2:10, dst: 2:10, srcBytes: 31, dstBytes: 32, idCounts: (7, 6)), 1@G(L(0:3)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:1...0:1 -> 0:1...0:4  1...1 -> 1...4  String  Left  'XYZ'
  2 #0: 0:2 -> 0:2  2 -> 2   |   0:1...0:3 -> 0:4...0:6  1...3 -> 4...6  Empty  Left
  3 #1: 0:2 -> 0:2  2 -> 2   |   0:3...0:5 -> 0:6...0:8  3...5 -> 6...8  String  Left  'W '
  4 #0: 0:1 -> 0:1  1 -> 1   |   0:5...0:6 -> 0:8...0:9  5...6 -> 8...9  Empty  Left
  5 #1: 0:2 -> 0:0  2 -> 0   |   0:6...0:8 -> 0:9...0:9  6...8 -> 9...9  String  Left  ''
  6 #0: 1:2 -> 1:2  3 -> 3   |   0:8...1:2 -> 0:9...1:2  8...11 -> 9...12  Empty  Left
  7 #1: 0:0 -> 0:3  0 -> 3   |   1:2...1:2 -> 1:2...1:5  11...11 -> 12...15  String  Left  'XYZ'
  8 #0: 0:3 -> 0:3  3 -> 3   |   1:2...1:5 -> 1:5...1:8  11...14 -> 15...18  Empty  Left
  9 #1: 0:2 -> 0:2  2 -> 2   |   1:5...1:7 -> 1:8...1:10  14...16 -> 18...20  String  Left  'W '
  10 #0: 0:1 -> 0:1  1 -> 1   |   1:7...1:8 -> 1:10...1:11  16...17 -> 20...21  Empty  Left
  11 #1: 0:3 -> 0:0  3 -> 0   |   1:8...1:11 -> 1:11...1:11  17...20 -> 21...21  String  Left  ''
  12 #0: 1:10 -> 1:10  11 -> 11   |   1:11...2:10 -> 1:11...2:10  20...31 -> 21...32  Empty  Left

overlay patch: (edits: @[(old: 1:0...1:0, new: 1:0...1:1), (old: 1:5...1:5, new: 1:6...1:7)])
---------- overlay map after edit
lXYZinW o
+lXYZi-nW t
line three
----------

================================================== testEdit @[(1:0...1:1, ""), (1:2...1:3, ""), (1:7...1:8, "")]
---------- initial content
line one
line two
line three
---------------------
initial snapshot: OverlayMap(@0, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 28, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 2:10 -> 2:10  28 -> 28   |   0:0...2:10 -> 0:0...2:10  0...28 -> 0...28  Empty  Left

---------- initial overlay map
line one
line two
line three
----------
overlay snapshot: OverlayMap(@6, (src: 2:10, dst: 2:10, srcBytes: 28, dstBytes: 30, idCounts: (7, 6)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:1...0:1 -> 0:1...0:4  1...1 -> 1...4  String  Left  'XYZ'
  2 #0: 0:2 -> 0:2  2 -> 2   |   0:1...0:3 -> 0:4...0:6  1...3 -> 4...6  Empty  Left
  3 #1: 0:2 -> 0:2  2 -> 2   |   0:3...0:5 -> 0:6...0:8  3...5 -> 6...8  String  Left  'W '
  4 #0: 0:1 -> 0:1  1 -> 1   |   0:5...0:6 -> 0:8...0:9  5...6 -> 8...9  Empty  Left
  5 #1: 0:2 -> 0:0  2 -> 0   |   0:6...0:8 -> 0:9...0:9  6...8 -> 9...9  String  Left  ''
  6 #0: 1:1 -> 1:1  2 -> 2   |   0:8...1:1 -> 0:9...1:1  8...10 -> 9...11  Empty  Left
  7 #1: 0:0 -> 0:3  0 -> 3   |   1:1...1:1 -> 1:1...1:4  10...10 -> 11...14  String  Left  'XYZ'
  8 #0: 0:2 -> 0:2  2 -> 2   |   1:1...1:3 -> 1:4...1:6  10...12 -> 14...16  Empty  Left
  9 #1: 0:2 -> 0:2  2 -> 2   |   1:3...1:5 -> 1:6...1:8  12...14 -> 16...18  String  Left  'W '
  10 #0: 0:1 -> 0:1  1 -> 1   |   1:5...1:6 -> 1:8...1:9  14...15 -> 18...19  Empty  Left
  11 #1: 0:2 -> 0:0  2 -> 0   |   1:6...1:8 -> 1:9...1:9  15...17 -> 19...19  String  Left  ''
  12 #0: 1:10 -> 1:10  11 -> 11   |   1:8...2:10 -> 1:9...2:10  17...28 -> 19...30  Empty  Left

---------- overlay map before edit
lXYZinW o
lXYZinW t
line three
----------
--------------------- content after edit
line one
ie tw
line three
---------------------
edit patch: (edits: @[(old: 1:0...1:1, new: 1:0...1:0), (old: 1:2...1:3, new: 1:1...1:1), (old: 1:7...1:8, new: 1:5...1:5)])
new snapshot: OverlayMap(@7, (src: 2:10, dst: 2:10, srcBytes: 25, dstBytes: 28, idCounts: (7, 6)), 1@G(L(0:3)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:1...0:1 -> 0:1...0:4  1...1 -> 1...4  String  Left  'XYZ'
  2 #0: 0:2 -> 0:2  2 -> 2   |   0:1...0:3 -> 0:4...0:6  1...3 -> 4...6  Empty  Left
  3 #1: 0:2 -> 0:2  2 -> 2   |   0:3...0:5 -> 0:6...0:8  3...5 -> 6...8  String  Left  'W '
  4 #0: 0:1 -> 0:1  1 -> 1   |   0:5...0:6 -> 0:8...0:9  5...6 -> 8...9  Empty  Left
  5 #1: 0:2 -> 0:0  2 -> 0   |   0:6...0:8 -> 0:9...0:9  6...8 -> 9...9  String  Left  ''
  6 #0: 1:0 -> 1:0  1 -> 1   |   0:8...1:0 -> 0:9...1:0  8...9 -> 9...10  Empty  Left
  7 #1: 0:0 -> 0:3  0 -> 3   |   1:0...1:0 -> 1:0...1:3  9...9 -> 10...13  String  Left  'XYZ'
  8 #0: 0:1 -> 0:1  1 -> 1   |   1:0...1:1 -> 1:3...1:4  9...10 -> 13...14  Empty  Left
  9 #1: 0:2 -> 0:2  2 -> 2   |   1:1...1:3 -> 1:4...1:6  10...12 -> 14...16  String  Left  'W '
  10 #0: 0:1 -> 0:1  1 -> 1   |   1:3...1:4 -> 1:6...1:7  12...13 -> 16...17  Empty  Left
  11 #1: 0:1 -> 0:0  1 -> 0   |   1:4...1:5 -> 1:7...1:7  13...14 -> 17...17  String  Left  ''
  12 #0: 1:10 -> 1:10  11 -> 11   |   1:5...2:10 -> 1:7...2:10  14...25 -> 17...28  Empty  Left

overlay patch: (edits: @[(old: 1:0...1:1, new: 1:0...1:0), (old: 1:5...1:6, new: 1:4...1:4)])
---------- overlay map after edit
lXYZinW o
XYZiW t
line three
----------

================================================== testEdit @[(0:0...0:0, "a")]
---------- initial content

---------------------
initial snapshot: OverlayMap(@0, (src: 0:0, dst: 0:0, srcBytes: 0, dstBytes: 0, idCounts: (1)), 1@G())
  0 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:0...0:0  0...0 -> 0...0  Empty  Left

---------- initial overlay map

----------
overlay snapshot: OverlayMap(@0, (src: 0:0, dst: 0:0, srcBytes: 0, dstBytes: 0, idCounts: (1)), 1@G())
  0 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:0...0:0  0...0 -> 0...0  Empty  Left

---------- overlay map before edit

----------
--------------------- content after edit
a
---------------------
edit patch: (edits: @[(old: 0:0...0:0, new: 0:0...0:1)])
new snapshot: OverlayMap(@1, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:2)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

overlay patch: (edits: @[(old: 0:0...0:0, new: 0:0...0:1)])
---------- overlay map after edit
a
----------

================================================== testEdit @[(0:0...0:1, "")]
---------- initial content
a
---------------------
initial snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- initial overlay map
a
----------
overlay snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- overlay map before edit
a
----------
--------------------- content after edit

---------------------
edit patch: (edits: @[(old: 0:0...0:1, new: 0:0...0:0)])
new snapshot: OverlayMap(@1, (src: 0:0, dst: 0:0, srcBytes: 0, dstBytes: 0, idCounts: (1)), 1@G(L(0:3)))
  0 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:0...0:0  0...0 -> 0...0  Empty  Left

overlay patch: (edits: @[(old: 0:0...0:1, new: 0:0...0:0)])
---------- overlay map after edit

----------

================================================== testEdit @[]
---------- initial content
a
---------------------
initial snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- initial overlay map
a
----------
overlay snapshot: OverlayMap(@1, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:1)))
  0 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Left  'XYZ'
  1 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:3...0:4  0...1 -> 3...4  Empty  Left

---------- overlay map before edit
XYZa
----------
--------------------- content after edit
a
---------------------
---------- overlay map after edit
XYZa
----------

================================================== testEdit @[]
---------- initial content
a
---------------------
initial snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- initial overlay map
a
----------
overlay snapshot: OverlayMap(@1, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:1)))
  0 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Right  'XYZ'
  1 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:3...0:4  0...1 -> 3...4  Empty  Left

---------- overlay map before edit
XYZa
----------
--------------------- content after edit
a
---------------------
---------- overlay map after edit
XYZa
----------

================================================== testEdit @[]
---------- initial content
a
---------------------
initial snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- initial overlay map
a
----------
overlay snapshot: OverlayMap(@1, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:1...0:1 -> 0:1...0:4  1...1 -> 1...4  String  Left  'XYZ'

---------- overlay map before edit
aXYZ
----------
--------------------- content after edit
a
---------------------
---------- overlay map after edit
aXYZ
----------

================================================== testEdit @[]
---------- initial content
a
---------------------
initial snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- initial overlay map
a
----------
overlay snapshot: OverlayMap(@1, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:1...0:1 -> 0:1...0:4  1...1 -> 1...4  String  Right  'XYZ'

---------- overlay map before edit
aXYZ
----------
--------------------- content after edit
a
---------------------
---------- overlay map after edit
aXYZ
----------

================================================== testEdit @[]
---------- initial content

---------------------
initial snapshot: OverlayMap(@0, (src: 0:0, dst: 0:0, srcBytes: 0, dstBytes: 0, idCounts: (1)), 1@G())
  0 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:0...0:0  0...0 -> 0...0  Empty  Left

---------- initial overlay map

----------
overlay snapshot: OverlayMap(@1, (src: 0:0, dst: 0:3, srcBytes: 0, dstBytes: 3, idCounts: (1, 1)), 1@G())
  0 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Left  'XYZ'
  1 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:3...0:3  0...0 -> 3...3  Empty  Left

---------- overlay map before edit
XYZ
----------
--------------------- content after edit

---------------------
---------- overlay map after edit
XYZ
----------

================================================== testEdit @[]
---------- initial content

---------------------
initial snapshot: OverlayMap(@0, (src: 0:0, dst: 0:0, srcBytes: 0, dstBytes: 0, idCounts: (1)), 1@G())
  0 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:0...0:0  0...0 -> 0...0  Empty  Left

---------- initial overlay map

----------
overlay snapshot: OverlayMap(@1, (src: 0:0, dst: 0:3, srcBytes: 0, dstBytes: 3, idCounts: (1, 1)), 1@G())
  0 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:0...0:0  0...0 -> 0...0  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Right  'XYZ'

---------- overlay map before edit
XYZ
----------
--------------------- content after edit

---------------------
---------- overlay map after edit
XYZ
----------

================================================== testEdit @[(0:0...0:1, "")]
---------- initial content
a
---------------------
initial snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- initial overlay map
a
----------
overlay snapshot: OverlayMap(@1, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:1)))
  0 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Left  'XYZ'
  1 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:3...0:4  0...1 -> 3...4  Empty  Left

---------- overlay map before edit
XYZa
----------
--------------------- content after edit

---------------------
edit patch: (edits: @[(old: 0:0...0:1, new: 0:0...0:0)])
new snapshot: OverlayMap(@2, (src: 0:0, dst: 0:3, srcBytes: 0, dstBytes: 3, idCounts: (1, 1)), 1@G(L(0:3)))
  0 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Left  'XYZ'
  1 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:3...0:3  0...0 -> 3...3  Empty  Left

overlay patch: (edits: @[(old: 0:3...0:4, new: 0:3...0:3)])
---------- overlay map after edit
XYZ
----------

================================================== testEdit @[(0:0...0:1, "")]
---------- initial content
a
---------------------
initial snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- initial overlay map
a
----------
overlay snapshot: OverlayMap(@1, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:1)))
  0 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Right  'XYZ'
  1 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:3...0:4  0...1 -> 3...4  Empty  Left

---------- overlay map before edit
XYZa
----------
--------------------- content after edit

---------------------
edit patch: (edits: @[(old: 0:0...0:1, new: 0:0...0:0)])
new snapshot: OverlayMap(@2, (src: 0:0, dst: 0:3, srcBytes: 0, dstBytes: 3, idCounts: (1, 1)), 1@G(L(0:3)))
  0 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Right  'XYZ'
  1 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:3...0:3  0...0 -> 3...3  Empty  Left

overlay patch: (edits: @[(old: 0:3...0:4, new: 0:3...0:3)])
---------- overlay map after edit
XYZ
----------

================================================== testEdit @[(0:0...0:1, "")]
---------- initial content
a
---------------------
initial snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- initial overlay map
a
----------
overlay snapshot: OverlayMap(@1, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:1...0:1 -> 0:1...0:4  1...1 -> 1...4  String  Left  'XYZ'

---------- overlay map before edit
aXYZ
----------
--------------------- content after edit

---------------------
edit patch: (edits: @[(old: 0:0...0:1, new: 0:0...0:0)])
new snapshot: OverlayMap(@2, (src: 0:0, dst: 0:3, srcBytes: 0, dstBytes: 3, idCounts: (1, 1)), 1@G(L(0:3)))
  0 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:0...0:0  0...0 -> 0...0  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Left  'XYZ'

overlay patch: (edits: @[(old: 0:0...0:1, new: 0:0...0:0)])
---------- overlay map after edit
XYZ
----------

================================================== testEdit @[(0:0...0:1, "")]
---------- initial content
a
---------------------
initial snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- initial overlay map
a
----------
overlay snapshot: OverlayMap(@1, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:1...0:1 -> 0:1...0:4  1...1 -> 1...4  String  Right  'XYZ'

---------- overlay map before edit
aXYZ
----------
--------------------- content after edit

---------------------
edit patch: (edits: @[(old: 0:0...0:1, new: 0:0...0:0)])
new snapshot: OverlayMap(@2, (src: 0:0, dst: 0:3, srcBytes: 0, dstBytes: 3, idCounts: (1, 1)), 1@G(L(0:3)))
  0 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:0...0:0  0...0 -> 0...0  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Right  'XYZ'

overlay patch: (edits: @[(old: 0:0...0:1, new: 0:0...0:0)])
---------- overlay map after edit
XYZ
----------

================================================== testEdit @[(0:0...0:0, "+")]
---------- initial content

---------------------
initial snapshot: OverlayMap(@0, (src: 0:0, dst: 0:0, srcBytes: 0, dstBytes: 0, idCounts: (1)), 1@G())
  0 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:0...0:0  0...0 -> 0...0  Empty  Left

---------- initial overlay map

----------
overlay snapshot: OverlayMap(@1, (src: 0:0, dst: 0:3, srcBytes: 0, dstBytes: 3, idCounts: (1, 1)), 1@G())
  0 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Left  'XYZ'
  1 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:3...0:3  0...0 -> 3...3  Empty  Left

---------- overlay map before edit
XYZ
----------
--------------------- content after edit
+
---------------------
edit patch: (edits: @[(old: 0:0...0:0, new: 0:0...0:1)])
new snapshot: OverlayMap(@2, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:2)))
  0 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Left  'XYZ'
  1 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:3...0:4  0...1 -> 3...4  Empty  Left

overlay patch: (edits: @[(old: 0:3...0:3, new: 0:3...0:4)])
---------- overlay map after edit
XYZ+
----------

================================================== testEdit @[(0:0...0:0, "+")]
---------- initial content

---------------------
initial snapshot: OverlayMap(@0, (src: 0:0, dst: 0:0, srcBytes: 0, dstBytes: 0, idCounts: (1)), 1@G())
  0 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:0...0:0  0...0 -> 0...0  Empty  Left

---------- initial overlay map

----------
overlay snapshot: OverlayMap(@1, (src: 0:0, dst: 0:3, srcBytes: 0, dstBytes: 3, idCounts: (1, 1)), 1@G())
  0 #0: 0:0 -> 0:0  0 -> 0   |   0:0...0:0 -> 0:0...0:0  0...0 -> 0...0  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Right  'XYZ'

---------- overlay map before edit
XYZ
----------
--------------------- content after edit
+
---------------------
edit patch: (edits: @[(old: 0:0...0:0, new: 0:0...0:1)])
new snapshot: OverlayMap(@2, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:2)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:1...0:1 -> 0:1...0:4  1...1 -> 1...4  String  Right  'XYZ'

overlay patch: (edits: @[(old: 0:0...0:0, new: 0:0...0:1)])
---------- overlay map after edit
+XYZ
----------

================================================== testEdit @[(0:0...0:0, "+")]
---------- initial content
a
---------------------
initial snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- initial overlay map
a
----------
overlay snapshot: OverlayMap(@1, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:1)))
  0 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Left  'XYZ'
  1 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:3...0:4  0...1 -> 3...4  Empty  Left

---------- overlay map before edit
XYZa
----------
--------------------- content after edit
+a
---------------------
edit patch: (edits: @[(old: 0:0...0:0, new: 0:0...0:1)])
new snapshot: OverlayMap(@2, (src: 0:2, dst: 0:5, srcBytes: 2, dstBytes: 5, idCounts: (1, 1)), 1@G(L(0:3)))
  0 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Left  'XYZ'
  1 #0: 0:2 -> 0:2  2 -> 2   |   0:0...0:2 -> 0:3...0:5  0...2 -> 3...5  Empty  Left

overlay patch: (edits: @[(old: 0:3...0:3, new: 0:3...0:4)])
---------- overlay map after edit
XYZ+a
----------

================================================== testEdit @[(0:0...0:0, "+")]
---------- initial content
a
---------------------
initial snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- initial overlay map
a
----------
overlay snapshot: OverlayMap(@1, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:1)))
  0 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Right  'XYZ'
  1 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:3...0:4  0...1 -> 3...4  Empty  Left

---------- overlay map before edit
XYZa
----------
--------------------- content after edit
+a
---------------------
edit patch: (edits: @[(old: 0:0...0:0, new: 0:0...0:1)])
new snapshot: OverlayMap(@2, (src: 0:2, dst: 0:5, srcBytes: 2, dstBytes: 5, idCounts: (1, 1)), 1@G(L(0:3)))
  0 #1: 0:0 -> 0:3  0 -> 3   |   0:0...0:0 -> 0:0...0:3  0...0 -> 0...3  String  Right  'XYZ'
  1 #0: 0:2 -> 0:2  2 -> 2   |   0:0...0:2 -> 0:3...0:5  0...2 -> 3...5  Empty  Left

overlay patch: (edits: @[(old: 0:3...0:3, new: 0:3...0:4)])
---------- overlay map after edit
XYZ+a
----------

================================================== testEdit @[(0:1...0:1, "+")]
---------- initial content
a
---------------------
initial snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- initial overlay map
a
----------
overlay snapshot: OverlayMap(@1, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:1...0:1 -> 0:1...0:4  1...1 -> 1...4  String  Left  'XYZ'

---------- overlay map before edit
aXYZ
----------
--------------------- content after edit
a+
---------------------
edit patch: (edits: @[(old: 0:1...0:1, new: 0:1...0:2)])
new snapshot: OverlayMap(@2, (src: 0:2, dst: 0:5, srcBytes: 2, dstBytes: 5, idCounts: (1, 1)), 1@G(L(0:3)))
  0 #0: 0:2 -> 0:2  2 -> 2   |   0:0...0:2 -> 0:0...0:2  0...2 -> 0...2  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:2...0:2 -> 0:2...0:5  2...2 -> 2...5  String  Left  'XYZ'

overlay patch: (edits: @[(old: 0:1...0:1, new: 0:1...0:2)])
---------- overlay map after edit
a+XYZ
----------

================================================== testEdit @[(0:1...0:1, "+")]
---------- initial content
a
---------------------
initial snapshot: OverlayMap(@0, (src: 0:1, dst: 0:1, srcBytes: 1, dstBytes: 1, idCounts: (1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left

---------- initial overlay map
a
----------
overlay snapshot: OverlayMap(@1, (src: 0:1, dst: 0:4, srcBytes: 1, dstBytes: 4, idCounts: (1, 1)), 1@G(L(0:1)))
  0 #0: 0:1 -> 0:1  1 -> 1   |   0:0...0:1 -> 0:0...0:1  0...1 -> 0...1  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:1...0:1 -> 0:1...0:4  1...1 -> 1...4  String  Right  'XYZ'

---------- overlay map before edit
aXYZ
----------
--------------------- content after edit
a+
---------------------
edit patch: (edits: @[(old: 0:1...0:1, new: 0:1...0:2)])
new snapshot: OverlayMap(@2, (src: 0:2, dst: 0:5, srcBytes: 2, dstBytes: 5, idCounts: (1, 1)), 1@G(L(0:3)))
  0 #0: 0:2 -> 0:2  2 -> 2   |   0:0...0:2 -> 0:0...0:2  0...2 -> 0...2  Empty  Left
  1 #1: 0:0 -> 0:3  0 -> 3   |   0:2...0:2 -> 0:2...0:5  2...2 -> 2...5  String  Right  'XYZ'

overlay patch: (edits: @[(old: 0:1...0:1, new: 0:1...0:2)])
---------- overlay map after edit
a+XYZ
----------

